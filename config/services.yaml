services:
  ApiPlatform\IApi:
    class: ApiPlatform\Api
    arguments:
      apiPlatformVersion: '%api_platform_version'

  ApiPlatform\Controller\IApiRouter:
    class: ApiPlatform\Controller\ApiRouter

  ApiPlatform\Controller\ExceptionControllerDecorator:
    decorates: Runway\Controller\IExceptionController

  ApiPlatform\Controller\System\IApiResponseController:
    class: ApiPlatform\Controller\System\ApiResponseController

  ApiPlatform\Controller\System\IApiExceptionResponseController:
    class: ApiPlatform\Controller\System\ApiExceptionResponseController

  ApiPlatform\Core\Provider\Endpoints\IEndpointsProvider:
    class: ApiPlatform\Core\Provider\Endpoints\EndpointsProvider

  ApiPlatform\Core\Provider\EndpointMethodParameters\IEndpointMethodParametersProvider:
    class: ApiPlatform\Core\Provider\EndpointMethodParameters\EndpointMethodParametersProvider

  ApiPlatform\Core\Validator\IEndpointMethodParameterValidator:
    class: ApiPlatform\Core\Validator\EndpointMethodParameterValidator

  ApiPlatform\Core\Provider\EndpointMethodParameterValue\IEndpointMethodParameterValidator:
    class: ApiPlatform\Core\Provider\EndpointMethodParameterValue\EndpointMethodParameterValidator

  ApiPlatform\Core\Provider\EndpointMethodParameterValue\IEndpointMethodParameterValueProvider:
    class: ApiPlatform\Core\Provider\EndpointMethodParameterValue\EndpointMethodParameterValueProvider

  ApiPlatform\Core\Storage\ITokenStorage:
    class: ApiPlatform\Core\Storage\TokenStorage
    arguments:
      tokenHeader: '#API_TOKEN_HEADER'

  ApiPlatform\Core\ICrypto:
    class: ApiPlatform\Core\Crypto
    arguments:
      cipher: 'AES-256-CBC'
      options: 1
      hashAlgo: 'sha256'
      sha2Length: 32

  ApiPlatform\Core\Singleton\IAuth:
    class: ApiPlatform\Core\Singleton\Auth
    arguments:
      key: '#API_CRYPTO_KEY'
      keyLength: '#API_CRYPTO_KEY_LENGTH'

  response.json.successful:
    class: Runway\Request\Response
    arguments:
      code: 200
      headers:
        Content-Type: application/json